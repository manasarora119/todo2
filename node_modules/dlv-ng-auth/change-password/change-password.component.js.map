{"version":3,"file":"change-password.component.js","sourceRoot":"","sources":["../../tmp/src-inlined/change-password/change-password.component.ts"],"names":[],"mappings":";;;;;;;;;AAAA,OAAO,EAAY,SAAS,EAAU,KAAK,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,eAAe,CAAC;AACzF,OAAO,EAAE,SAAS,EAAE,WAAW,EAAE,UAAU,EAAE,MAAM,gBAAgB,CAAC;AACpE,OAAO,EAAE,WAAW,EAAE,MAAM,oBAAoB,CAAC;AAEjD,OAAO,EAAE,UAAU,EAAE,MAAM,iBAAiB,CAAC;AAG7C,OAAO,yBAAyB,CAAC;AACjC,OAAO,uBAAuB,CAAC;AAC/B,OAAO,6BAA6B,CAAC;AACrC,OAAO,2BAA2B,CAAC;AAkDnC;IAaE,iCAAoB,WAAyB;QAAzB,gBAAW,GAAX,WAAW,CAAc;QAVnC,0BAAqB,GAAuB,IAAI,YAAY,EAAO,CAAC;QAM9E,kBAAa,GAAG,2DAA2D,CAAC;IAM5E,CAAC;IAED,0CAAQ,GAAR;QACE,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAED,oDAAkB,GAAlB;QACE,IAAI,CAAC,YAAY,GAAG,IAAI,WAAW,CAAC,EAAE,EAAE;YACtC,UAAU,CAAC,QAAQ;SACpB,CAAC,CAAC;QACH,IAAI,CAAC,YAAY,GAAG,IAAI,WAAW,CAAC,EAAE,EAAE;YACtC,UAAU,CAAC,OAAO,CAAC,2DAA2D,CAAC;YAC/E,UAAU,CAAC,QAAQ;SACpB,CAAC,CAAC;QACH,IAAI,CAAC,OAAO,GAAG,IAAI,WAAW,CAAC,EAAE,EAAE,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC;IAC5D,CAAC;IAED,4CAAU,GAAV;QACE,IAAI,CAAC,YAAY,GAAG,IAAI,SAAS,CAAC;YAC9B,YAAY,EAAG,IAAI,CAAC,YAAY;YAChC,YAAY,EAAG,IAAI,CAAC,YAAY;YAChC,OAAO,EAAG,IAAI,CAAC,OAAO;SACzB,CAAC,CAAC;IACL,CAAC;IAED,gDAAc,GAAd;QAAA,iBAOC;QANC,IAAI,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC;QACnC,OAAO,IAAI,CAAC,OAAO,CAAC;QACpB,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,UAAA,GAAG;YACjD,KAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAEzC,CAAC,EAAC,UAAA,KAAK,IAAK,OAAA,KAAI,CAAC,WAAW,CAAC,KAAK,CAAC,EAAvB,CAAuB,CAAC,CAAC;IACvC,CAAC;IAED,qDAAmB,GAAnB;QACE,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACzC,CAAC;IAEO,6CAAW,GAAnB,UAAqB,KAAK;QACpB,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACtC,OAAO,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;IACnC,CAAC;IAvDM;QAAR,KAAK,EAAE;;6DAAmB;IACjB;QAAT,MAAM,EAAE;kCAAyB,YAAY;0EAAgC;IAHnE,uBAAuB;QAhDnC,SAAS,CAAC;YACT,QAAQ,EAAE,s5EAyCT;YACD,MAAM,EAAE,CAAC,m5FAER,CAAC;YACF,QAAQ,EAAE,iBAAiB;SAC5B,CAAC;yCAckC,WAAW;OAblC,uBAAuB,CA2DnC;IAAD,8BAAC;CAAA,AA3DD,IA2DC;SA3DY,uBAAuB","sourcesContent":["import { NgModule, Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { AuthService } from '../shared/services';\n\nimport { Observable } from 'rxjs/Observable';\n\n\nimport 'rxjs/add/operator/catch';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/toPromise';\nimport 'rxjs/add/observable/throw';\n\n@Component({\n  template: `\n    <div class=\"changePasswordModal\">\n        <div class=\"modal-overlay\" (click)=\"closeUpdatePassword()\"></div>\n        <div class=\"modal-body\">\n            <span class=\"close-button\" (click)=\"closeUpdatePassword()\">\n                &times;\n            </span>\n            <div class=\"modal-header\">\n                <h3>Change Password</h3>\n            </div>\n            <form [formGroup]=\"passwordForm\" novalidate>\n                <div class=\"input-details\">\n                    <div class=\"input-wrapper\">\n                        <label for=\"current\" class=\"control-label\">Current Password<span class='required text-danger'>*</span></label>\n                        <div class=\"text\">\n                            <input type=\"password\" name=\"current\" formControlName=\"old_password\">\n\n                        </div>\n                    </div>\n                    <div class=\"input-wrapper\">\n                        <label for=\"newPass\" class=\"control-label\">New Password<span class='required text-danger'>*</span></label>\n                        <div class=\"text\">\n                            <input type=\"password\" name=\"newPass\" formControlName=\"new_password\" />\n                            <p class=\"validation-style\" *ngIf=\"new_password.errors && new_password.errors.pattern\"> Password length( 8-15 ) , Special Character (. > ! @ # $ % ^ & _ *).</p>\n                        </div>\n                    </div>\n                    <div class=\"input-wrapper\">\n                        <label for=\"confirm\" class=\"control-label\">Confirm Password<span class='required text-danger'>*</span></label>\n                        <div class=\"text\">\n                            <input type=\"password\" name=\"confirm\" formControlName=\"confirm\">\n                            <p class=\"validation-style\" *ngIf=\"confirm.value && (new_password.value !== confirm.value)\">Password don't match.</p>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"modal-footer\">\n                    <button type=\"submit\" class=\"button button-save\" (click)=\"updatePassword()\" [disabled]=\"passwordForm.invalid\">Save changes</button>\n                    <button class=\"button button-close\" (click)=\"closeUpdatePassword()\">Close</button>\n                </div>\n            </form>\n        </div>\n    </div>\n  `,\n  styles: [`\n    .user-details-section{float:right;padding:0 25px;height:40px;position:relative;border-left:2px solid transparent;z-index:2}.user-details-section .display-text{height:calc(100% - 5px);margin-top:10px;color:#515356;line-height:20px}.user-details-section .display-text .user-icon{font-size:1.7em;margin-right:5px}.user-details-section .display-text .angle-down{margin:0 5px;font-size:0.7em;position:relative;top:-5px}.user-details-section .display-text .user-name{position:relative;top:-5px}.user-details-section .sub-menu{display:none;position:absolute;left:-2px;top:40px;width:100%;border:1px solid #D9DEE4;background:#fff;line-height:15px}.user-details-section .sub-menu ul{margin:0;padding:0}.user-details-section .sub-menu li{list-style-type:none;font-size:14px;color:#5A738E;padding:10px}.user-details-section .sub-menu li:hover{color:#262626;background-color:#f5f5f5}.user-details-section:hover{background:#D9DEE4;color:black;cursor:pointer}.user-details-section:hover .sub-menu{display:block}.user-details-section.invert .display-text{color:#ffffff}.user-details-section.invert:hover{background:#3e485f}.changePasswordModal{position:fixed;top:0;left:0;width:100%;height:100%;z-index:100}.changePasswordModal .modal-overlay{position:absolute;top:0;left:0;background:rgba(0,0,0,0.6);width:100%;height:100%}.changePasswordModal .modal-body{position:relative;background:#fff;margin-top:10%;margin-left:30%;width:40vw;z-index:99}.changePasswordModal .modal-body .modal-header{text-align:center;padding-top:5px;color:#515356}.changePasswordModal .modal-body .close-button{position:absolute;position:absolute;right:10px;top:10px;width:20px;cursor:pointer}.changePasswordModal .modal-body .close-button img{max-width:100%}.changePasswordModal .modal-body .input-details .input-wrapper{text-align:center;padding:5px 20px}.changePasswordModal .modal-body .input-details .input-wrapper label{float:left;width:40%;line-height:2.1}.changePasswordModal .modal-body .input-details .input-wrapper .text{margin-left:10px}.changePasswordModal .modal-body .input-details .input-wrapper .text input{margin-left:10px;border:1px solid #C2C2C2;border-radius:1px;font-size:12px;color:#414042;background:#ffffff;padding:0 7px;width:50%;height:40px}.changePasswordModal .modal-body .modal-footer{padding:10px;text-align:center}.changePasswordModal .modal-body .modal-footer .button{border:medium none;font-size:12px;font-family:opensans-semibold;height:30px;padding:0px 30px;border-radius:2px;margin-bottom:6px;line-height:1.9;min-width:120px;transition:all 0.3s;cursor:pointer;font-size:16px}.changePasswordModal .modal-body .modal-footer .button.button-save{background:#217589;color:#FFFFFF}.changePasswordModal .modal-body .modal-footer .button.button-close{background:#EF3D26;color:#FFFFFF}.changePasswordModal .modal-body .modal-footer .button:hover{box-shadow:0px 3px 6px rgba(0,0,0,0.34);border:none}p.validation-style{color:#ff0000;font-size:12px;text-align:right}\n  `],\n  selector: 'change-password'\n})\nexport class ChangePasswordComponent implements OnInit {\n\n  @Input() isChange: boolean;\n  @Output() changePasswordEmitter : EventEmitter<any> = new EventEmitter<any>();\n\n  passwordForm: FormGroup;\n  old_password : FormControl;\n  new_password : FormControl;\n  confirm : FormControl;\n  passwordRegex = /^[a-zA-Z0-9!@#~'$%^&*()_=+<>\\/\\\\?{}|\\-\\[\\].\",:;\\s]{8,15}$/;\n\n  \n\n  constructor(private authService : AuthService) {\n\n  }\n\n  ngOnInit() {\n    this.createFormControls();\n    this.createForm();\n  }\n\n  createFormControls(){\n    this.old_password = new FormControl('', [\n      Validators.required\n    ]);\n    this.new_password = new FormControl('', [\n      Validators.pattern(/^[a-zA-Z0-9!@#~'$%^&*()_=+<>\\/\\\\?{}|\\-\\[\\].\",:;\\s]{8,15}$/),\n      Validators.required\n    ]);\n    this.confirm = new FormControl('', [Validators.required]);\n  }\n\n  createForm(){\n    this.passwordForm = new FormGroup({\n        old_password : this.old_password,\n        new_password : this.new_password,\n        confirm : this.confirm\n    });\n  }\n\n  updatePassword(){\n    let data = this.passwordForm.value;\n    delete data.confirm;\n    this.authService.changePassword(data).subscribe(res => {\n      this.changePasswordEmitter.emit(false);\n\n    },error =>  this.handleError(error));\n  }\n\n  closeUpdatePassword(){\n    this.changePasswordEmitter.emit(false);\n  }\n\n  private handleError (error) {\n        this.changePasswordEmitter.emit(true);\n        return Observable.throw(error);\n    }\n\n}\n"]}