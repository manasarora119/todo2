{"version":3,"file":"user-details.component.js","sourceRoot":"","sources":["../../tmp/src-inlined/user-details/user-details.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit, Input, Output, EventEmitter, ElementRef, DoCheck } from '@angular/core';\n\nimport { UserService, AuthService, AuthDetailsService } from '../shared/services';\nimport { ChangePasswordComponent } from '../change-password/change-password.component';\n\n@Component({\n  template: `\n    <div *ngIf=\"!isMaterialView\">\n        <div class=\"user-details-section invert\" *ngIf=\"!isChange\" [ngClass]=\"style\">\n        <div class=\"display-text\">\n          <i class=\"user-icon icon-dp hidden-xs\"></i>\n          <span class=\"user-name\">{{user}}</span>\n        </div>\n        <div class=\"logout\">\n          <span (click)=\"logout()\">Logout</span>\n        </div>\n      </div>\n    </div>\n\n    <!-- <change-password *ngIf=\"isChange\" [isChange]=\"isChange\" (changePasswordEmitter)=\"callBack($event)\"></change-password> -->\n\n\n    <div *ngIf=\"isMaterialView\" class=\"mat-profile\">\n       <mat-menu #profileMenu=\"matMenu\">\n        <!-- <button mat-menu-item disabled>Change password</button> -->\n        <button mat-menu-item (click)=\"logout()\">Logout</button>\n      </mat-menu>\n      <span class=\"mat-ava\" [ngStyle]=\"{'background': avatarBackgroundcolor || '#000'}\">{{shortName}}</span>\n      <button mat-flat-button [matMenuTriggerFor]=\"profileMenu\" class=\"profile-link\">\n        {{user}}&nbsp;<span class=\"material-icons\">expand_more</span></button>\n      <!-- <a [matMenuTriggerFor]=\"profileMenu\" class=\"profile-link\">\n        {{user}}&nbsp;<span class=\"material-icons\">expand_more</span>\n      </a> -->\n    </div>\n  `,\n  styles: [`\n    .user-details-section{float:right;padding:0 20px 0 20px;height:40px;position:relative;border-left:2px solid transparent;z-index:2}.user-details-section .display-text{height:calc(100% - 16px);color:#515356;line-height:35px;float:left;margin:8px 0;position:relative;padding:0 10px 0 0}.user-details-section .display-text .user-icon{font-size:1.7em;margin-right:5px}.user-details-section .display-text:after{content:'';width:1px;height:calc(100% - 6px);background:#515356;position:absolute;top:3px;right:0}.user-details-section .logout{float:right;padding-left:10px;color:#515356;font-family:OpenSans-Semibold;margin:3px 0 2px;line-height:35px;cursor:pointer}.user-details-section .display-text .user-name{position:relative;top:-5px}.user-details-section.invert .display-text,.user-details-section.invert .display-text i,.user-details-section.invert .display-text span,.user-details-section.invert .logout,.user-details-section.invert .logout span{color:#ffffff}.user-details-section.invert .display-text:after{background:#ffffff}.mat-profile{float:right;margin-right:13px;background:#fff}a.profile-link{color:#696969}span.mat-ava{border-radius:50%;background:red;color:#fff;font-weight:600;font-size:15px;display:inline-block;height:38px;width:38px;line-height:38px;padding:0 10px;text-transform:uppercase}\n  `],\n  selector: 'delhivery-user-details',\n  entryComponents: [ChangePasswordComponent]\n})\nexport class DelhiveryUserDetailsComponent implements OnInit, DoCheck {\n\n  @Output() onLogout = new EventEmitter<string>();\n  @Input() isMaterialView; \n\n  user: string;\n  shortName: string\n  public isChange = false;\n  public avatarBackgroundcolor;\n  constructor(\n    private userService: UserService,\n    private authService: AuthService,\n    private authDetailService: AuthDetailsService) {\n\n  }\n\n  ngOnInit() {\n    const userDetails = this.authService.getUserProfile({ server: false });\n    try {\n      this.user = userDetails['first_name'] && userDetails['last_name']\n        ? `${userDetails['first_name']} ${userDetails['last_name']}` : this.getDisplayName(userDetails);\n    } catch (err) {\n      this.user = this.getDisplayName(userDetails);\n    }\n\n\n  this.shortName = userDetails['first_name'] && userDetails['last_name'] ? userDetails['first_name'][0] + userDetails['last_name'][0]: userDetails['first_name'][0] + userDetails['last_name'][1]\n\n  this.avatarBackgroundcolor = this.userService.getBackgroundColor(this.user);\n  }\n\n\n  ngDoCheck(): void {\n    this.authDetailService.getOn401()\n      .subscribe(() => {\n        this.logout();\n      });\n  }\n\n  logout() {\n    this.authService.logout();\n    setTimeout(() => {\n      this.onLogout.emit();\n    }, 1);\n  }\n\n  private getDisplayName(user) {\n\n    let fullname = '';\n\n    if (user['first_name'] && user['first_name'].length < 3) {\n      fullname = `${user['first_name']} ${user['last_name'].substring(0, 10)}`;\n    } else if (user['first_name'] && user['first_name'].length >= 3) {\n      fullname = user['first_name'];\n    } else {\n      fullname = user.username;\n    }\n\n    return fullname;\n\n  }\n\n\n  changePassword() {\n    this.isChange = true;\n  }\n\n  callBack(data) {\n    this.isChange = data;\n  }\n\n}\n"]}