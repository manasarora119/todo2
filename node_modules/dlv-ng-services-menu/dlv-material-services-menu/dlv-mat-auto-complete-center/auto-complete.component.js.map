{"version":3,"file":"auto-complete.component.js","sourceRoot":"","sources":["../../../tmp/src-inlined/dlv-material-services-menu/dlv-mat-auto-complete-center/auto-complete.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit, Input, Output, EventEmitter, ViewChild, OnChanges } from '@angular/core';\nimport { MatCenterService, AutoCompleteService } from '../shared/services'\nimport { Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\n\nconst DEBOUNCE_TIME_LIMIT=500 //  500 mili seconds\nconst MIN_INPUT_CHAR_REQUIRED=2 // alteast 2 characters\n\n@Component({\n  selector: 'dlv-mat-auto-complete-center',\n  template: `\n    <div class=\"center-form-search\">\n      <span class=\"material-icons \">search</span>\n\n      <!-- =========================== -->\n      <!-- === Center search input === -->\n      <!-- =========================== -->\n      <input type=\"text\" [placeholder]=\"placeholder\" class=\"search-center\" [(ngModel)]=\"inputValue\" (ngModelChange)=\"filter(inputValue, $event)\" (paste)=\"pasteEvent($event)\" #autoCompleteInput />\n    </div>\n    <mat-list class=\"list-height\" *ngIf=\"itemList && itemList.length\">\n      <mat-list-item class=\"center-name-list\" (click)=\"onCenterSelect(item)\" *ngFor=\"let item of itemList\"> {{item.name}}\n      </mat-list-item>\n    </mat-list>\n\n    <p class=\"no_result\" *ngIf=\"!isLoader && itemList && !itemList.length\">No Search Result.</p>\n    <p class=\"no_result\" *ngIf=\"isError\">Not able to fetch centers.</p>\n\n    <div class=\"loader\" *ngIf=\"isLoader\">\n      <span class=\"line-spinner\"></span>\n    </div>\n  `,\n  styles: [`\n    .centerName{text-align:center}.centerName span{cursor:pointer}.center-form-search{position:relative;background:#eee;border-radius:3px}.center-form-search span{position:absolute;left:14px;top:9px;color:#939696;font-size:22px}.search-center{width:calc(100% - 40px);padding:8px 5px;margin-left:31px;border:none;border-radius:0;font-size:12px;line-height:18px;color:#414042;padding-bottom:10px;background:transparent}.search-center:focus{border-color:transparent;outline:none;box-shadow:none}.center-list{margin:0 0;border-radius:1px;font-size:12px;color:#414042;background:#ffffff;padding:0;margin:0;max-height:140px;text-align:left;overflow-y:auto;width:100%}.center-name-list{list-style:none;width:calc(100% - 10px);cursor:pointer;font-size:14px;display:block;transition:all 0.3s linear}.center-name-list:hover{background:#ececec}.single-center{font-size:15px;text-align:center;margin:18% 0}.single-center .single-center-name{font-size:18px;margin-top:10px;display:block}.no-center{font-size:16px;text-align:center;margin:22% 0}.no_result{color:#000}.loading-centers{background:#BDBDBD;position:absolute;width:100%;height:100%}.loading-centers .status{top:40%;text-align:center;position:relative}.loader{margin-top:10px}.line-spinner{border:3px solid #000;border-top:3px solid rgba(255,0,0,0);border-radius:50%;width:20px;height:20px;-webkit-animation:spin 2s linear infinite;animation:spin 1s linear infinite;display:inline-block;vertical-align:middle;margin:0 auto;display:table}.list-height{max-height:150px;overflow:scroll}.search-center{padding:8px 8px 8px 38px;margin-left:0px;border:1px solid transparent;border-radius:3px;font-size:13px;line-height:21px;color:#414042;background:transparent}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}\n  `]\n})\nexport class DlvMatAutoCompleteComponent implements OnInit, OnChanges {\n\n  @Input() open;\n  @Input() label: string;\n  @Input() placeholder: string;\n  @Output() onCenterChange: EventEmitter<any> = new EventEmitter<any>();\n  @ViewChild('autoCompleteInput') autoCompInput: any;\n  public itemList;\n  public isLoader: boolean = false;\n  // public isResult : boolean = false;\n  public isError: boolean = false;\n  private isData: boolean = false;\n  private isPasteCenter: boolean = false;\n  public inputValue: string;\n  customInput : Subject<string> = new Subject();\n\n  public autoFocuse = false;\n\n  constructor(private autoComplete: AutoCompleteService, private centerService: MatCenterService) { }\n\n\n  ngOnInit() {\n     this.customInput.pipe(debounceTime(DEBOUNCE_TIME_LIMIT)).subscribe(value => {\n              if(value.length >= MIN_INPUT_CHAR_REQUIRED) {\n                this.autoComplete.getCenterList(value.toLowerCase(), this.isPasteCenter)\n                .then(response => {\n                  this.isLoader = false;\n                  // this.isResult = true;\n\n                  // this is checking if there is any data(centers) mathces to user's search then it stored in itemList which is in array form\n                  if (this.isData) {\n                    this.itemList = response;\n                  }\n                  this.isPasteCenter = false;\n                }, error => {\n                  this.isPasteCenter = false;\n                  this.itemList = false;\n                  this.isLoader = false;\n                  // this.isResult = false;\n                  this.isError = false;\n\n                  // checking errors\n                  if (error) {\n                    this.isError = true;\n                    this.isLoader = false;\n                  } else if (!this.isData) {\n                    // this.isResult = true;\n                    this.isLoader = false;\n                  }\n\n                })\n              }\n      })\n\n  }\n\n  ngOnChanges() {\n     setTimeout(()=>{\n            this.autoCompInput.nativeElement.focus();\n       }, 0)\n  }\n  //\n  /**\n   * @name pasteEvent\n   * @description This is for paste event, if user paste the center in input field\n   * @param event It is containing paste event\n   */\n  pasteEvent(event) {\n    if (event['type'] === \"paste\") {\n      this.isPasteCenter = true;\n    }\n  }\n\n  /**\n   * @name filter\n   * @description it is checking length of string if it is greater than or equal to 2 den it will only show the itemlist\n   * @param val : it is containing value which user enter in input field to search\n   */\n  filter(val, event?) {\n    // debounce the input \n    this.customInput.next(val)\n\n    this.isError = false;\n    if (val && val.length >= 2) {\n      this.isLoader = true;\n      this.isData = true;\n      // this.isResult = false;\n      // This condition checks length of input value field which should be equal to 2\n      if (val.length === 2) {\n        this.itemList = false;\n      }\n\n    }\n    // If val is not greater than or eqaul to 2 then it will not show any itemlist and data\n    else {\n      this.isData = false;\n      this.itemList = false;\n      this.isLoader = false;\n    }\n\n  }\n\n  /**\n   * @name onCenterSelect\n   * @description selecting center name and code on behalf of facility id,key and name and emitting the center.\n   * @param center: center is storing facility id,facility integration key and facility name\n   *\n   */\n  onCenterSelect(center) {\n    let selectCenter = {\n      center_name: center.name,\n      center_code: center.facility_code\n    }\n    this.closeSearchCenter();\n    this.onCenterChange.emit(selectCenter); // here selectCenter is storing selected center and code\n    this.autoFocuse= false;\n  }\n\n  /**\n   * @name closeSearchCenter\n   * @description after select center from search, this fucntion is called to close search dropdown\n   */\n  closeSearchCenter() {\n    this.centerService.setCheckModel(true);\n  }\n\n}\n\n"]}